(function(e){function t(t){for(var o,i,c=t[0],l=t[1],s=t[2],u=0,f=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(f.length)f.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(o=!1)}o&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},r={app:0},a=[];function i(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"f621721f"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=o);var a,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(e);var s=new Error;a=function(t){l.onerror=l.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,n[1](s)}r[e]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:l})}),12e4);l.onerror=l.onload=a,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/UploadForm/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"04d18":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="04d18"},"084c":function(e,t,n){"use strict";n("c7ab")},"0c2b":function(e,t,n){"use strict";n("5d0d")},1961:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="1961"},"22fc":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="22fc"},2410:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="2410"},"24a8":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="24a8"},"2eec":function(e,t,n){"use strict";n("e6cc")},"329f":function(e,t,n){"use strict";n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("b64b"),n("4de4"),n("e439"),n("159b"),n("dbb4"),n("b680"),Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=n("f5ed");function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function e(t){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;c(this,e),l(this,"type",void 0),l(this,"boundRect",void 0),l(this,"updateData",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.data=i(i({},n.data),e);var t=n.data.uuid,o=void 0===t?null:t;o&&(n.currentNode.dataset.uuid=o)})),l(this,"fetchData",(function(){n.updateData({position:n.coordinate()})})),l(this,"frame",(function(){return i({},n.boundRect)})),l(this,"transform",(function(e,t){if(n.options.editable){var o=n.currentNode,r=parseFloat(o.style.height),a=parseFloat(o.style.width),i=parseFloat(o.style.top),c=parseFloat(o.style.left),l=100*t/n.boundRect.height,s=100*e/n.boundRect.width;if(!(i+l<n.options.boundReachPercent||i+l>100-n.options.boundReachPercent)){if(0===n.type){if(r-l<n.options.boundReachPercent)return;o.style.top=(i+l).toFixed(3)+"%",o.style.height=(r-l).toFixed(3)+"%"}else if(1===n.type)o.style.height=(r+l).toFixed(3)+"%";else if(2===n.type){if(s+c<n.options.boundReachPercent||s+c>=a+c)return;o.style.left=(s+c).toFixed(3)+"%",o.style.width=(a-s).toFixed(3)+"%"}else if(3===n.type)o.style.width=(a+s).toFixed(3)+"%";else if(4===n.type){if(r-l<n.options.boundReachPercent)return;if(a-s<n.options.boundReachPercent)return;o.style.top=(i+l).toFixed(3)+"%",o.style.height=(r-l).toFixed(3)+"%",o.style.left=(s+c).toFixed(3)+"%",o.style.width=(a-s).toFixed(3)+"%"}else if(5===n.type){if(a+s<n.options.boundReachPercent)return;if(r-l<n.options.boundReachPercent)return;o.style.top=(i+l).toFixed(3)+"%",o.style.height=(r-l).toFixed(3)+"%",o.style.width=(a+s).toFixed(3)+"%"}else if(6===n.type){if(r+l<n.options.boundReachPercent)return;if(a-s<n.options.boundReachPercent)return;o.style.height=(r+l).toFixed(3)+"%",o.style.left=(s+c).toFixed(3)+"%",o.style.width=(a-s).toFixed(3)+"%"}else if(7===n.type){if(r+l<n.options.boundReachPercent)return;if(a+s<n.options.boundReachPercent)return;o.style.height=(r+l).toFixed(3)+"%",o.style.width=(a+s).toFixed(3)+"%"}else if(-1===n.type){if(l+i<n.options.boundReachPercent||l+i+r>100-n.options.boundReachPercent)return;if(s+c<n.options.boundReachPercent||s+c+a>100-n.options.boundReachPercent)return;o.style.top=(l+i).toFixed(3)+"%",o.style.left=(s+c).toFixed(3)+"%"}n.fetchData()}}})),l(this,"coordinate",(function(){var e=n.currentNode,t={x:e.style.left,y:e.style.top,x1:(parseFloat(e.style.width)+parseFloat(e.style.left)).toFixed(3)+"%",y1:(parseFloat(e.style.height)+parseFloat(e.style.top)).toFixed(3)+"%"};return t})),l(this,"updateTag",(function(e){var t={};return"string"===typeof e&&(t={tag:e,tagName:e}),"object"===r(e)&&(t=i({},e)),n.data=i(i({},n.data),t),t})),this.currentNode=t,this.type=o,this.boundRect=a||{},this.options=s;var u=e.tagTemplate();this.updateData(i({},u)),this.fetchData()};t["default"]=s,l(s,"tagTemplate",(function(e,t,n){var r="".concat((0,o.UUID)(16,16)),a="请选择或添加新标签",i="temp@".concat(r);return{uuid:n||r,tag:t||i,tagName:e||a}})),l(s,"dataTemplate",(function(e,t,n,o,r){return e&&/^.+$/gi.test(e)||(e={tag:"temp@".concat((new Date).getTime())}),i(i({},e),{},{position:{x:t,y:n,x1:o,y1:r}})}))},"330b":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="330b"},"33ed":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="33ed"},"35cd":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="35cd"},"361e":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="361e"},"39cf":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="39cf"},"3a1b":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="3a1b"},"3f12":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="3f12"},"3f5a":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="3f5a"},"413a":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="413a"},4770:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="4770"},"4d0c":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="4d0c"},"543a":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="543a"},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");Object(o["pushScopeId"])("data-v-486c8d7a");var r={class:"urlInput",style:{width:"60%"}},a={class:"urlInput",style:{width:"60%"}},i=Object(o["createTextVNode"])("Initialization"),c={class:"table"},l=Object(o["createTextVNode"])("upload img"),s=Object(o["createTextVNode"])("upload img"),u=Object(o["createTextVNode"])("ADD"),d=Object(o["createTextVNode"])("DELETE"),f={class:"upload"},p=Object(o["createTextVNode"])("Upload"),h=Object(o["createTextVNode"])("Save Images"),b=Object(o["createTextVNode"])("Upload Original Info");function v(e,t,n,v,g,m){var y=Object(o["resolveComponent"])("el-input"),O=Object(o["resolveComponent"])("el-button"),w=Object(o["resolveComponent"])("el-table-column"),E=Object(o["resolveComponent"])("el-option"),x=Object(o["resolveComponent"])("el-select"),j=Object(o["resolveComponent"])("el-checkbox"),_=Object(o["resolveComponent"])("el-upload"),T=Object(o["resolveComponent"])("el-table");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("div",r,[Object(o["createVNode"])(y,{modelValue:g.videoUrl,"onUpdate:modelValue":t[0]||(t[0]=function(e){return g.videoUrl=e}),placeholder:"Please enter video ID|Sample input:L77ujOmwe1E"},null,8,["modelValue"])]),Object(o["createElementVNode"])("div",a,[Object(o["createVNode"])(y,{modelValue:g.SegInfo,"onUpdate:modelValue":t[1]||(t[1]=function(e){return g.SegInfo=e}),placeholder:"Sample input:0:00-0:30;0:30-1:52; or 0000-0030;0030-0152;"},null,8,["modelValue"]),Object(o["createVNode"])(O,{onClick:m.generateSeg},{default:Object(o["withCtx"])((function(){return[i]})),_:1},8,["onClick"])]),Object(o["createElementVNode"])("div",c,[Object(o["createVNode"])(T,{data:g.tableData,class:"tb-edit",style:{width:"100%"}},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(g.tableHead,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(w,{key:t,label:e.label,property:e.property,width:"200",align:"center"},{default:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(y,{modelValue:e.row[e.column.property],"onUpdate:modelValue":function(t){return e.row[e.column.property]=t}},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1032,["label","property"])})),128)),Object(o["createVNode"])(w,{label:g.timeHead.label,property:g.timeHead.property,width:"200",align:"center"},{default:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(y,{modelValue:g.timeValue[e.$index],"onUpdate:modelValue":function(t){return g.timeValue[e.$index]=t},placeholder:"Please end with ;"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1},8,["label","property"]),Object(o["createVNode"])(w,{label:g.MetaTypeTitle,width:"120",align:"center"},{default:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(x,{modelValue:g.TypeValue[e.$index],"onUpdate:modelValue":function(t){return g.TypeValue[e.$index]=t},placeholder:"Select MetaType",onChange:function(t){return m.changeMetaType(t,e.$index)}},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(g.MetaType,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(E,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]})),_:1},8,["label"]),Object(o["createVNode"])(w,{label:g.SegmentTitle,width:"450",align:"center"},{default:Object(o["withCtx"])((function(e){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(g.Segments,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])(j,{label:t,key:t,onChange:function(n){return m.changeSegValue(n,e.$index,t)}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t),1)]})),_:2},1032,["label","onChange"])})),128))]})),_:1},8,["label"]),Object(o["createVNode"])(w,{label:"NonBbox",width:"150"},{default:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(_,{action:"",accept:"image/jpeg,image/png","on-remove":m.removeImg,"on-change":m.onUploadChange,"auto-upload":!1,"show-file-list":!0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O,{size:"small",type:"primary",onClick:function(t){return m.setrow(e.$index)}},{default:Object(o["withCtx"])((function(){return[l]})),_:2},1032,["onClick"])]})),_:2},1032,["on-remove","on-change"])]})),_:1}),Object(o["createVNode"])(w,{label:"Bbox",width:"150"},{default:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(_,{action:"",accept:"image/jpeg,image/png","on-remove":m.removeImg1,"on-change":m.onUploadChange1,"auto-upload":!1,"show-file-list":!0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O,{size:"small",type:"primary",onClick:function(t){return m.setrow1(e.$index)}},{default:Object(o["withCtx"])((function(){return[s]})),_:2},1032,["onClick"])]})),_:2},1032,["on-remove","on-change"])]})),_:1}),Object(o["createVNode"])(w,{label:"Operation",align:"center",width:"180"},{default:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(O,{size:"mini",onClick:function(t){return m.handleEdit(e.$index,e.row)}},{default:Object(o["withCtx"])((function(){return[u]})),_:2},1032,["onClick"]),Object(o["createVNode"])(O,{size:"mini",type:"danger",onClick:function(t){return m.handleDelete(e.$index,e.row)}},{default:Object(o["withCtx"])((function(){return[d]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])]),Object(o["createElementVNode"])("div",f,[Object(o["createVNode"])(O,{onClick:m.upload},{default:Object(o["withCtx"])((function(){return[p]})),_:1},8,["onClick"]),Object(o["createVNode"])(O,{onClick:m.uploadImg},{default:Object(o["withCtx"])((function(){return[h]})),_:1},8,["onClick"]),Object(o["createVNode"])(O,{onClick:m.uploadOriginalInfo},{default:Object(o["withCtx"])((function(){return[b]})),_:1},8,["onClick"])])])}Object(o["popScopeId"])();n("a434"),n("ac1f"),n("466d"),n("b0c0"),n("d3b7"),n("25f0"),n("1276"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("7437");var g=n("1250"),m=n("b3d7"),y=n("e0ec"),O=n("c4e3"),w={components:{ElementPlus:g["a"],FileSaver:y,JSZip:O,"ui-marker":m["AIMarker"]},data:function(){return{count_col:0,showMenu:!1,curColumn:null,tableHead:[{label:"Question",property:"Question"},{label:"Reason",property:"Reason"}],tableHead1:{label:"Question",property:"Question"},tableData:[{Question:"What is...",Reason:"Reason1"},{Question:"How is...",Reason:"Reason2"}],timeHead:{label:"Start-End",property:"Start-End"},timeValue:[[],[]],MetaType:[{value:"Text Only",label:"Text Only"},{value:"Video Only",label:"Video Only"},{value:"Text and Video",label:"Text and Video"}],MetaTypeTitle:"Query Type",TypeValue:["",""],SegInfo:[],SegNum:[],Segments:[],SegValue:[[],[]],SegmentTitle:"Segment",progressLength:710,videoUrl:[],currentRow:[],imgList:[[],[]],img_base64:[],img_file:[],storePath:"/imgStore",bboxList:[[],[]],bbox_base64:[],bbox_file:[]}},computed:{player:function(){return this.$refs.videoPlayer.player},setProgressBgStyle:function(){return{width:"".concat(this.width+this.sliderWidth,"px")}},setProgressStyle:function(){return{width:"".concat(this.progressWidth,"px")}}},methods:{generateSeg:function(){console.log(this.SegInfo),this.Segments=[];var e=0,t=0,n=0;while(1){if(e=this.SegInfo.indexOf(";",e),e<0)break;console.log(this.SegInfo.indexOf(";",e)),t++,e+=1}e=0;while(1){if(e=this.SegInfo.indexOf("-",e),e<0)break;console.log(this.SegInfo.indexOf("-",e)),n++,e++}if(n==t)for(e=1;e<=t;e++)this.Segments.push("Seg"+e);else alert("Lack of - or ;");this.checkSegInput(this.SegInfo)},checkSegInput:function(e){e.indexOf(" ")>0&&alert("Space in input!Please delete all spaces");var t=e.indexOf("-"),n=e.indexOf(";");while(n>0&n<e.length-1){var o=e.substring(t+1,n),r=e.substring(n+1,n+1+o.length);console.log(o),console.log(r),o!=r&&alert("Interval between segments!"),t=e.indexOf("-",t+1),n=e.indexOf(";",n+1)}},handleEdit:function(e,t){this.tableData.splice(e+1,0,{Question:"",Reason:""}),this.TypeValue.splice(e+1,0,""),this.SegValue.splice(e+1,0,[]),this.imgList.splice(e+1,0,[]),this.bboxList.splice(e+1,0,[]),this.timeValue.splice(e+1,0,[]),console.log(this.imgList)},handleDelete:function(e,t){this.tableData.splice(e,1),this.TypeValue.splice(e,1),this.SegValue.splice(e,1),this.imgList.splice(e,1),this.timeValue.splice(e,1),this.bboxList.splice(e,1)},changeMetaType:function(e,t){this.TypeValue[t]=e,console.log(this.TypeValue[t])},changeSegValue:function(e,t,n){if(e){console.log(e),console.log(t),console.log(n);for(var o=this.SegValue[t],r=0,a=0;a<o.length;a++)if(o[a]===n){r=1;break}0==r&&this.SegValue[t].push(parseInt(n.substring(3)))}else{for(o=this.SegValue[t],a=0;a<o.length;a++)if(o[a]===n)break;this.SegValue[t].splice(a,1)}console.log(e),console.log(this.SegValue)},ShowIntroduction:function(){this.Introduction=!this.Introduction},upload:function(){var e=[];e.push({videoID:this.videoUrl});var t,n,o,r,a,i,c=this.timeProcess(this.SegInfo);e.push({segInfo:c});for(var l=0;l<this.tableData.length;l++){o=this.tableData[l].Question,t=o.indexOf("<"),n=o.indexOf(">"),a=0,r=[];var s=0;while(t>=0){if(i=o.substring(t+1,n),console.log(i),a++,i.match("bbox")){var u=i.match("bbox");u=u["index"];var d=i.substring(u,u+5);"/"==d[d.length-1]&&(d=d.substring(0,d.length-1)),u=i.indexOf("/"),-1==u&&alert("lack of / in Q"+l);var f=i.substring(u+1,n);o=o.substring(0,t+1)+d+"/"+f+o.substring(n),0==s&&(r=this.videoUrl+"_bbox_Q"+l+".jpg",s++)}else{u=i.indexOf("/"),-1==u&&alert("lack of / in Q"+l);f=i.substring(u+1,n);o=o.substring(0,t+1)+f+o.substring(n),0==s&&(r=this.videoUrl+"_img_Q"+l+".jpg",s++)}t=0,n=0;for(var p=0;p<=a;p++)t=o.indexOf("<",t),n=o.indexOf(">",n),t++,n++;t--,n--}console.log(o);var h=this.obtainStartEndTime(this.timeValue[l]);console.log(h),e.push({ID:this.videoUrl+"_Q"+l,Question:o,Reason:this.tableData[l].Reason,QueryType:this.TypeValue[l],Segment:this.SegValue[l],Filename:r,Start_EndTime:h})}console.log(e);var b=JSON.stringify(e),v=new Blob([b],{type:""});y.saveAs(v,this.videoUrl+".json")},obtainStartEndTime:function(e){return e.indexOf(" ")>0&&alert("Space in start-end!Please delete all spaces"),";"!=e[e.length-1]&&alert("start-end time must end with ;"),this.timeProcess(e)},timeProcess:function(e){var t,n,o,r=0,a=e.indexOf(";"),i=[];while(a>0)t=e.indexOf("-",r),n=e.substring(r,t),o=e.substring(t+1,a),n=n.indexOf(":")>0?60*parseInt(n.substring(0,n.indexOf(":")))+parseInt(n.substring(n.indexOf(":")+1)):n.indexOf(".")>0?60*parseInt(n.substring(0,n.indexOf(".")))+parseInt(n.substring(n.indexOf(".")+1)):60*parseInt(n.substring(0,2))+parseInt(n.substring(2)),o=o.indexOf(":")>0?60*parseInt(o.substring(0,o.indexOf(":")))+parseInt(o.substring(o.indexOf(":")+1)):o.indexOf(".")>0?60*parseInt(o.substring(0,o.indexOf(".")))+parseInt(o.substring(o.indexOf(".")+1)):60*parseInt(o.substring(0,2))+parseInt(o.substring(2)),i.push([n,o]),r=a+1,a=e.indexOf(";",a+1),console.log(i);return i},setrow:function(e){this.currentRow=e,console.log(e)},setrow1:function(e){this.currentRow=e,console.log(e)},addlist:function(e,t){t.length;this.imgList[this.currentRow].push({originalName:e.name,fileName:this.videoUrl+"_Q"+this.currentRow.toString(),base64Data:this.img_base64}),console.log(this.img_base64)},onUploadChange:function(e,t){var n="image/jpeg"===e.raw.type||"image/png"===e.raw.type,o=e.size/1024/1024<1;if(!n)return this.$message.error("只能上传jpg/png图片!"),!1;if(!o)return this.$message.error("上传文件大小不能超过 2MB!"),!1;this.img_file=e;var r=new FileReader,a=this;r.onloadend=function(e){a.img_base64=r.result,a.imgList[a.currentRow].push({originalName:a.img_file.name,fileName:a.videoUrl+"_img_Q"+a.currentRow.toString(),base64Data:a.img_base64})},r.readAsDataURL(e.raw)},onUploadChange1:function(e,t){var n="image/jpeg"===e.raw.type||"image/png"===e.raw.type,o=e.size/1024/1024<1;if(!n)return this.$message.error("只能上传jpg/png图片!"),!1;if(!o)return this.$message.error("上传文件大小不能超过 2MB!"),!1;this.bbox_file=e;var r=new FileReader,a=this;r.onloadend=function(e){a.bbox_base64=r.result,a.bboxList[a.currentRow].push({originalName:a.bbox_file.name,fileName:a.videoUrl+"_bbox_Q"+a.currentRow.toString(),base64Data:a.bbox_base64}),console.log(a.bboxList)},r.readAsDataURL(e.raw)},removeImg:function(e,t){for(var n=this.imgList[this.currentRow],o=0;o<n.length;o++)if(n[o].originalName===e.name){this.imgList[this.currentRow].splice(o,1);break}console.log(this.imgList)},removeImg1:function(e,t){for(var n=this.bboxList[this.currentRow],o=0;o<n.length;o++)if(n[o].originalName===e.name){this.bboxList[this.currentRow].splice(o,1);break}console.log(this.bboxList)},downloadFile:function(e,t){document.createElement("a");var n=this.base64ToBlob(t);console.log(n)},base64ToBlob:function(e){for(var t=e.split(":")[1],n=window.atob(e),o=n.length,r=new Uint8Array(o),a=0;a<o;++a)r[a]=n.charCodeAt(a);return new Blob([r],{type:t})},uploadImg:function(){for(var e,t=new O,n=this.videoUrl+".zip",o=0;o<this.imgList.length;o++)for(var r=0;r<this.imgList[o].length;r++)e=this.imgList[o][r].base64Data,e=e.substring(e.indexOf(",")+1),r+1,t.file(this.imgList[o][r].fileName+".jpg",e,{base64:!0}),console.log(r);for(var a=0;a<this.bboxList.length;a++)for(r=0;r<this.bboxList[a].length;r++)e=this.bboxList[a][r].base64Data,e=e.substring(e.indexOf(",")+1),r+1,t.file(this.bboxList[a][r].fileName+".jpg",e,{base64:!0}),console.log(r);console.log(n),t.generateAsync({type:"blob"}).then((function(e){saveAs(e,n)}))},uploadOriginalInfo:function(){var e=[];e.push({videoID:this.videoUrl}),e.push({segInfo:this.SegInfo});for(var t=0;t<this.tableData.length;t++)e.push({ID:this.videoUrl+"_Q"+t,Question:this.tableData[t].Question,Reason:this.tableData[t].Reason,QueryType:this.TypeValue[t],Segment:this.SegValue[t],Start_EndTime:this.timeValue[t]});console.log(e);var n=JSON.stringify(e),o=new Blob([n],{type:""});y.saveAs(o,this.videoUrl+"_original.json")}}};n("2eec"),n("0c2b"),n("8efb"),n("084c");w.render=v,w.__scopeId="data-v-486c8d7a";var E=w,x=(n("3ca3"),n("ddb0"),n("6c02")),j=n("cf05"),_=n.n(j),T={class:"home"},N=Object(o["createElementVNode"])("img",{alt:"Vue logo",src:_.a},null,-1);function C(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("HelloWorld");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",T,[N,Object(o["createVNode"])(c,{msg:"Welcome to Your Vue.js App"})])}Object(o["pushScopeId"])("data-v-500f67cc");var S={class:"hello"},D=Object(o["createStaticVNode"])('<p data-v-500f67cc> For a guide and recipes on how to configure / customize this project,<br data-v-500f67cc> check out the <a href="https://cli.vuejs.org" target="_blank" rel="noopener" data-v-500f67cc>vue-cli documentation</a>. </p><h3 data-v-500f67cc>Installed CLI Plugins</h3><ul data-v-500f67cc><li data-v-500f67cc><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel" target="_blank" rel="noopener" data-v-500f67cc>babel</a></li><li data-v-500f67cc><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-router" target="_blank" rel="noopener" data-v-500f67cc>router</a></li><li data-v-500f67cc><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-vuex" target="_blank" rel="noopener" data-v-500f67cc>vuex</a></li></ul><h3 data-v-500f67cc>Essential Links</h3><ul data-v-500f67cc><li data-v-500f67cc><a href="https://vuejs.org" target="_blank" rel="noopener" data-v-500f67cc>Core Docs</a></li><li data-v-500f67cc><a href="https://forum.vuejs.org" target="_blank" rel="noopener" data-v-500f67cc>Forum</a></li><li data-v-500f67cc><a href="https://chat.vuejs.org" target="_blank" rel="noopener" data-v-500f67cc>Community Chat</a></li><li data-v-500f67cc><a href="https://twitter.com/vuejs" target="_blank" rel="noopener" data-v-500f67cc>Twitter</a></li><li data-v-500f67cc><a href="https://news.vuejs.org" target="_blank" rel="noopener" data-v-500f67cc>News</a></li></ul><h3 data-v-500f67cc>Ecosystem</h3><ul data-v-500f67cc><li data-v-500f67cc><a href="https://router.vuejs.org" target="_blank" rel="noopener" data-v-500f67cc>vue-router</a></li><li data-v-500f67cc><a href="https://vuex.vuejs.org" target="_blank" rel="noopener" data-v-500f67cc>vuex</a></li><li data-v-500f67cc><a href="https://github.com/vuejs/vue-devtools#vue-devtools" target="_blank" rel="noopener" data-v-500f67cc>vue-devtools</a></li><li data-v-500f67cc><a href="https://vue-loader.vuejs.org" target="_blank" rel="noopener" data-v-500f67cc>vue-loader</a></li><li data-v-500f67cc><a href="https://github.com/vuejs/awesome-vue" target="_blank" rel="noopener" data-v-500f67cc>awesome-vue</a></li></ul>',7);function M(e,t,n,r,a,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",S,[Object(o["createElementVNode"])("h1",null,Object(o["toDisplayString"])(n.msg),1),D])}Object(o["popScopeId"])();var k={name:"HelloWorld",props:{msg:String}};n("8a42");k.render=M,k.__scopeId="data-v-500f67cc";var U=k,R={name:"Home",components:{HelloWorld:U}};R.render=C;var F=R,L=[{path:"/",name:"Home",component:F},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],V=Object(x["a"])({history:Object(x["b"])(),routes:L}),I=V,P=n("5502"),A=Object(P["a"])({state:{},mutations:{},actions:{},modules:{}}),B=Object(o["createApp"])(E);B.use(A).use(g["a"]).use(I).use(m["AIMarker"]).mount("#app")},"56de":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="56de"},5886:function(e,t,n){"use strict";n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("b64b"),n("4de4"),n("e439"),n("159b"),n("dbb4"),n("10d1"),n("b680"),Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"UUID",{enumerable:!0,get:function(){return o.UUID}}),Object.defineProperty(t,"positionP2S",{enumerable:!0,get:function(){return o.positionP2S}}),Object.defineProperty(t,"transformDataArray",{enumerable:!0,get:function(){return o.transformDataArray}}),Object.defineProperty(t,"ResizeAnnotation",{enumerable:!0,get:function(){return r["default"]}}),t["default"]=t.BdAIMarker=void 0,n("f321");var o=n("f5ed"),r=i(n("efb8")),a=i(n("329f"));function i(e){return e&&e.__esModule?e:{default:e}}function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n){p(e,t),t.set(e,n)}function p(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h(e,t){var n=g(e,t,"get");return b(e,n)}function b(e,t){return t.get?t.get.call(e):t.value}function v(e,t,n){var o=g(e,t,"set");return m(e,o,n),n}function g(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function m(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}var y=new WeakMap,O=new WeakMap,w=new WeakMap,E=new WeakMap,x=new WeakMap,j=new WeakMap,_=new WeakMap,T=new WeakMap,N=new WeakMap,C=new WeakMap,S=new WeakMap,D=new WeakMap,M=new WeakMap,k=new WeakMap,U=function e(t,n,i){var l=this,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(u(this,e),f(this,y,{writable:!0,value:!1}),f(this,O,{writable:!0,value:void 0}),f(this,w,{writable:!0,value:void 0}),f(this,E,{writable:!0,value:void 0}),f(this,x,{writable:!0,value:void 0}),f(this,j,{writable:!0,value:void 0}),f(this,_,{writable:!0,value:void 0}),f(this,T,{writable:!0,value:void 0}),f(this,N,{writable:!0,value:function(e){v(l,y,e)}}),d(this,"setConfigOptions",(function(e){l.options=s(s({},l.options),e.options),h(l,_)&&h(l,_).setConfigOptions(e)})),f(this,C,{writable:!0,value:function(){var e=l.boundRect();return"undefined"!=typeof e.x?e:{x:e.left,y:e.top,left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}}}),f(this,S,{writable:!0,value:function(e,t,n){if(l.options.editable){var r=e.type,i=h(l,C).call(l);if(t&&v(l,O,t-i.x),n&&v(l,w,n-i.y),r===o.MOUSE_EVENT[6])return v(l,y,!1),v(l,j,!1),void h(l,_).dispatchEventToAnno(e);if(h(l,y))h(l,_).dispatchEventToAnno(e);else if(r===o.MOUSE_EVENT[0]||r===o.TOUCH_EVENT[0]){if(e.target.classList.contains(l.options.annotationClass)||e.target.classList.contains("".concat(o.PREFIX_RESIZE_DOT)))return v(l,y,!0),void h(l,_).dispatchEventToAnno(e);if(h(l,j))return void h(l,k).call(l,h(l,O),h(l,w));v(l,T,a["default"].tagTemplate()),h(l,_).removeSelectedAnnotation(),v(l,j,!0),v(l,E,h(l,O)),v(l,x,h(l,w)),l.resetDraft(),h(l,D).call(l,h(l,E),h(l,x))}else r===o.MOUSE_EVENT[1]||r===o.TOUCH_EVENT[1]?h(l,j)&&h(l,k).call(l,h(l,O),h(l,w)):r===o.MOUSE_EVENT[4]||r===o.TOUCH_EVENT[2]||r===o.TOUCH_EVENT[4]?(h(l,j)&&h(l,_)&&(h(l,_).drawAnnotation(l.draftRect,h(l,T)),l.resetDraft()),v(l,j,!1)):h(l,j)&&h(l,M).call(l,h(l,O),h(l,w))&&(h(l,_)&&(h(l,_).drawAnnotation(l.draftRect,h(l,T)),l.resetDraft()),v(l,j,!1))}}}),f(this,D,{writable:!0,value:function(e,t){if(l.options.editable){var n=h(l,C).call(l);l.draft.style.display="",h(l,O)<e?(l.draft.style.right=100*Math.abs(n.width-e)/n.width+"%",l.draft.style.left="",l.draftRect=Object.assign(l.draftRect,{x:(100*Math.abs(h(l,O))/n.width).toFixed(3)+"%"})):(l.draft.style.left=(100*Math.abs(e)/n.width).toFixed(3)+"%",l.draft.style.right="",l.draftRect=Object.assign(l.draftRect,{x:(100*Math.abs(e)/n.width).toFixed(3)+"%"})),h(l,w)<t?(l.draft.style.bottom=(100*Math.abs(n.height-t)/n.height).toFixed(3)+"%",l.draft.style.top="",l.draftRect=Object.assign(l.draftRect,{y:(100*Math.abs(h(l,w))/n.height).toFixed(3)+"%"})):(l.draft.style.top=(100*Math.abs(t)/n.height).toFixed(3)+"%",l.draft.style.bottom="",l.draftRect=Object.assign(l.draftRect,{y:(100*Math.abs(t)/n.height).toFixed(3)+"%"}))}}}),f(this,M,{writable:!0,value:function(e,t){return e>=h(l,C).call(l).width||t>=h(l,C).call(l).height||e<1||t<1}}),d(this,"resetDraft",(function(){l.draftRect={x:-1,y:-1,width:0,height:0},l.draft.style.width="0%",l.draft.style.height="0%"})),d(this,"clearAll",(function(){var e=l.layer.querySelectorAll(".".concat(l.options.annotationClass));e.forEach((function(e){var t;"function"===typeof e.remove?e.remove():null===(t=e.parentNode)||void 0===t||t.removeChild(e)})),l.renderData(void 0)})),f(this,k,{writable:!0,value:function(e,t){if(l.options.editable){h(l,M).call(l,e,t)&&v(l,j,!1),h(l,D).call(l,h(l,E),h(l,x));var n=(100*Math.abs(e-h(l,E))/h(l,C).call(l).width).toFixed(3),o=(100*Math.abs(t-h(l,x))/h(l,C).call(l).height).toFixed(3);l.draftRect=Object.assign(l.draftRect,{width:n+"%",height:o+"%"}),l.draft.style.width=l.draftRect.width,l.draft.style.height=l.draftRect.height}}}),d(this,"renderData",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=h(l,_);n&&n.renderData(e,t)})),d(this,"setTag",(function(e){h(l,_)&&e&&h(l,_).setTagForCurrentMovement(e)})),d(this,"selectMarkerByTagId",(function(e){e&&h(l,_).selectMarkerByTagId(e)})),d(this,"dataSource",(function(){if(h(l,_))return h(l,_).dataSource()})),d(this,"dataForTag",(function(e,t){return h(l,_).dataSourceOfTag(e,t)})),d(this,"getAnnotation",(function(){return h(l,_)})),"object"!==c(p))throw new Error("Please provide a callback Config for BdAIMarker");if(this.options=s(s({},o.defaultConfig.options),p.options),t){this.layer=t,this.draft=n,v(this,j,!1),this.draftRect={},v(this,E,-1),v(this,x,-1),this.boundRect=function(){return t.getBoundingClientRect()},v(this,_,i||new r["default"](n.parentNode,h(this,C),p,h(this,N)));var b=this;"both"!=this.options.deviceType&&"mouse"!=this.options.deviceType||o.MOUSE_EVENT.forEach((function(e,n,o){t.addEventListener(e,(function(e){if("touch"!=l.options.deviceType){var t=e.clientX,n=e.clientY;h(b,S).call(b,e,t,n)}}),!0)})),"both"!=this.options.deviceType&&"touch"!=this.options.deviceType||o.TOUCH_EVENT.forEach((function(e,n,o){t.addEventListener(e,(function(e){if("mouse"!=l.options.deviceType&&e.targetTouches){var t=e.targetTouches[0],n=t?t.clientX:void 0,o=t?t.clientY:void 0;h(b,S).call(b,e,n,o)}}),!0)}))}};t.BdAIMarker=U,U.prototype.util={UUID:o.UUID,positionP2S:o.positionP2S,transformDataArray:o.transformDataArray};var R=U;t["default"]=R},"5a25":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="5a25"},"5d0d":function(e,t,n){},"6d70":function(e,t,n){},"6e20":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="6e20"},"74ce":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="74ce"},"87aa":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="87aa"},8936:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="8936"},"8a42":function(e,t,n){"use strict";n("6d70")},"8efb":function(e,t,n){"use strict";n("eb93")},"959b":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="959b"},"9c0f":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="9c0f"},"9d13":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="9d13"},a192:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="a192"},ae76:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="ae76"},b3d7:function(e,t,n){e.exports=n("5886")},c477:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="c477"},c543:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="c543"},c7ab:function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"},e0ec:function(e,t,n){(function(o){var r,a,i,c=n("7037").default;n("b0c0"),n("ac1f"),n("5319"),function(n,o){a=[],r=o,i="function"===typeof r?r.apply(t,a):r,void 0===i||(e.exports=i)}(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=c(t)&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function n(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){s(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==("undefined"===typeof window?"undefined":c(window))&&window.window===window?window:"object"==("undefined"===typeof self?"undefined":c(self))&&self.self===self?self:"object"==("undefined"===typeof o?"undefined":c(o))&&o.global===o?o:void 0,l=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=("undefined"===typeof window?"undefined":c(window))||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,t,o){var c=i.URL||i.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?a(l):r(l.href)?n(e,t,o):a(l,l.target="_blank")):(l.href=c.createObjectURL(e),setTimeout((function(){c.revokeObjectURL(l.href)}),4e4),setTimeout((function(){a(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,o,i){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,i),o);else if(r(e))n(e,o,i);else{var c=document.createElement("a");c.href=e,c.target="_blank",setTimeout((function(){a(c)}))}}:function(e,t,o,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,o);var a="application/octet-stream"===e.type,c=/constructor/i.test(i.HTMLElement)||i.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&c||l)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},u.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,f=d.createObjectURL(e);r?r.location=f:location.href=f,r=null,setTimeout((function(){d.revokeObjectURL(f)}),4e4)}});i.saveAs=s.saveAs=s,e.exports=s}))}).call(this,n("c8ba"))},e6cc:function(e,t,n){},ea8b:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="ea8b"},eb93:function(e,t,n){},efb8:function(e,t,n){"use strict";n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("b64b"),n("4de4"),n("e439"),n("159b"),n("dbb4"),n("10d1"),n("8a79"),n("b680"),n("b0c0"),n("a434"),n("99af"),n("7db0"),Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,n("f321");var o=n("f5ed"),r=a(n("329f"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n){f(e,t),t.set(e,n)}function f(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p(e,t){var n=v(e,t,"get");return h(e,n)}function h(e,t){return t.get?t.get.call(e):t.value}function b(e,t,n){var o=v(e,t,"set");return g(e,o,n),n}function v(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function g(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}var m=new WeakMap,y=new WeakMap,O=new WeakMap,w=new WeakMap,E=new WeakMap,x=new WeakMap,j=new WeakMap,_=new WeakMap,T=new WeakMap,N=new WeakMap,C=new WeakMap,S=function e(t,n){var a=this,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.defaultConfig,f=arguments.length>3?arguments[3]:void 0;s(this,e),d(this,m,{writable:!0,value:void 0}),d(this,y,{writable:!0,value:void 0}),d(this,O,{writable:!0,value:void 0}),d(this,w,{writable:!0,value:void 0}),d(this,E,{writable:!0,value:void 0}),d(this,x,{writable:!0,value:void 0}),d(this,j,{writable:!0,value:void 0}),d(this,_,{writable:!0,value:function(){a.options.supportDelKey&&a.options.closable?document.addEventListener("keydown",a.delEvent):document.removeEventListener("keydown",a.delEvent)}}),d(this,T,{writable:!0,value:function(){if(a.annotationContainer)for(var e=a.annotationContainer.querySelectorAll(".".concat(o.imageOpContent)),t=0;t<e.length;t++){var n=e[t];a.options.showTags?n.style.visibility="visible":n.style.visibility="collapse",a.options.tagLocation==o.defaultPositions.out_bottom?(n.style.position="absolute",n.style.bottom=null):n.style.position=null;var r=n.querySelector(".g-image-op-del");if(r&&(a.options.closable?r.style.display="":r.style.display="none"),a.options.textComponent){var i=a.options.textComponent.apply(null,[n]);if(!i)break;if(!(i instanceof Element))throw new Error("closeComponent not a Element");if(n.hasChildNodes()){for(var c=n.childNodes,l=c.length-1;l>-1;l--){var s=c[l];s&&n.removeChild(s)}n.appendChild(i)}}}a.currentMovement&&!a.options.editable&&a.currentMovement.currentNode.querySelectorAll("[class*=".concat(o.PREFIX_RESIZE_DOT,"]")).forEach((function(e){e.classList.contains(o.dotCls[8])?e.classList.remove("hidden"):e.classList.add("hidden")}))}}),u(this,"setConfigOptions",(function(e){a.options=l(l({},a.options),e.options),a.config=l(l({},a.config),e),p(a,_).call(a),p(a,T).call(a)})),u(this,"dataTemplate",(function(){return r["default"].dataTemplate.apply(r["default"],arguments)})),u(this,"reset",(function(){a.data=[],a.config.onUpdated([])})),u(this,"isValid",(function(e){if(!e)return!1;var t=[];return/^\d*(\.\d+)?%$/.test(e.width)?t.push(!0):parseFloat(e.width)<1&&t.push(!1),/^\d*(\.\d+)?%$/.test(e.height)?t.push(!0):parseFloat(e.height)<1&&t.push(!1),t.filter(Boolean).length==t.length})),u(this,"renderData",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:p(a,m).call(a).width,height:p(a,m).call(a).height};e instanceof Array&&e.length>0?e.forEach((function(e,n,o){var r;r=e.position.x.endsWith("%")?{x:e.position.x,y:e.position.y,width:parseFloat(e.position.x1)-parseFloat(e.position.x)+"%",height:parseFloat(e.position.y1)-parseFloat(e.position.y)+"%"}:{x:(100*e.position.x/t.width).toFixed(3)+"%",y:(100*e.position.y/t.height).toFixed(3)+"%",width:(100*(e.position.x1-e.position.x)/t.width).toFixed(3)+"%",height:(100*(e.position.y1-e.position.y)/t.height).toFixed(3)+"%"},a.drawAnnotation(r,e)})):a.reset(),a.config.onAnnoDataFullLoaded()})),u(this,"dataSource",(function(){return a.data})),u(this,"dataSourceOfTag",(function(e){for(var t=0;t<a.data.length;t++){var n=a.data[t];if(n.tag===e&&n.uuid==uuid)return n}})),u(this,"dataSourceOfUUID",(function(e){for(var t=0;t<a.data.length;t++){var n=a.data[t];if(n.uuid==e)return n}})),u(this,"setTagForCurrentMovement",(function(e){if(a.currentMovement){var t=a.currentMovement.currentNode,n=a.currentMovement.updateTag(e),r=t.querySelector(".".concat(o.imageOpTag)).dataset.id;for(var i in n)t.querySelector(".".concat(o.imageOpTag)).dataset[i]=n[i];var c=t.dataset.uuid;t.querySelector(".".concat(o.imageOpTag)).innerText=n.tagName;for(var s=0;s<a.data.length;s++){var u=a.data[s],d=Object.assign({},u);if(u.tag===r&&u.uuid===c){u=l(l({},u),n),t.querySelector(".".concat(o.imageOpTag)).dataset.id=n.tag,t.querySelector(".".concat(o.imageOpTag)).dataset.name=n.tagName,a.config.onAnnoChanged(u,d),a.data[s]=u;break}}a.config.onUpdated(a.dataSource())}})),u(this,"updateMovementData",(function(){if(null!=a.currentMovement){for(var e=a.currentMovement.data,t=!1,n=0;n<a.data.length;n++){var o=a.data[n];if(o.tag===e.tag&&e.uuid===o.uuid){JSON.stringify(o)!=JSON.stringify(e)&&(a.data[n]=e,t=!0,a.config.onAnnoChanged(e,o));break}}t&&a.config.onUpdated(a.dataSource(),a.currentMovement)}})),d(this,N,{writable:!0,value:function(e){if(a.options.editable){var t=e.currentTarget.parentNode.parentNode.parentNode;a.removeAnnotation(t)}}}),u(this,"removeAnnotation",(function(e){if(e){for(var t,n,o=e.dataset.uuid,r=0;r<a.data.length;r++)if(t=a.data[r],t.uuid===o){a.config.onAnnoRemoved(t)&&a.data.splice(r,1);break}if(a.config.onUpdated(a.dataSource()),"function"===typeof e.remove)e.remove();else null===(n=e.parentNode)||void 0===n||n.removeChild(e)}})),u(this,"drawAnnotation",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(a.isValid(e)){a.removeSelectedAnnotation();var n=document.createElement("div");n.className="".concat(a.options.annotationClass," selected"),n.style.position="absolute",n.style.top=e.y,n.style.left=e.x,n.style.width=e.width,n.style.height=e.height;var c={top:"".concat(o.PREFIX_RESIZE_DOT," top"),bottom:"".concat(o.PREFIX_RESIZE_DOT," bottom"),left:"".concat(o.PREFIX_RESIZE_DOT," left"),right:"".concat(o.PREFIX_RESIZE_DOT," right"),topLeft:"".concat(o.PREFIX_RESIZE_DOT," top-left"),topRight:"".concat(o.PREFIX_RESIZE_DOT," top-right"),bottomLeft:"".concat(o.PREFIX_RESIZE_DOT," bottom-left"),bottomRight:"".concat(o.PREFIX_RESIZE_DOT," bottom-right"),trash:"g-image-op"},s=0;for(var u in"object"===i(t)&&(t=l(l({},r["default"].tagTemplate(t.tagName,t.tag,t.uuid)),t),console.log("💥💥💥💥💥💥💥",t.uuid)),c){var d=document.createElement("div");if(8===s){d.className="".concat(a.options.blurOtherDotsShowTags?"":"".concat(o.dotCls[s])," ").concat(c[u]);var f=document.createElement("div");f.className=o.imageOpContent,a.options.showTags?f.style.visibility="visible":f.style.visibility="collapse",a.options.tagLocation==o.defaultPositions.out_bottom?(f.style.position="absolute",f.style.bottom=null):f.style.position=null;var h=document.createElement("i");h.className="g-image-op-del iconfont s-icon icon-trash s-icon-trash",h.innerText=" × ",h.addEventListener("click",p(a,N),!0),a.options.closable?h.style.display="":h.style.display="none";var b=document.createElement("span");b.dataset.name=t.tagName,b.className="".concat(o.imageOpTag),b.innerText=t.tagName,b.dataset.id=t.tag,a.options.trashPositionStart?(f.appendChild(h),f.appendChild(b)):(f.appendChild(b),f.appendChild(h)),d.appendChild(f)}else d.className="".concat(c[u]," ").concat(o.dotCls[s]," ").concat(a.options.editable?"":"hidden");n.appendChild(d),s++}a.annotationContainer.appendChild(n),n.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var t=e.currentTarget,n=t.querySelector(".".concat(o.imageOpTag)).dataset,r=a.dataSourceOfTag(n.id,t.dataset.uuid);return a.config.onAnnoContextMenu(r,e.target,a),!0},a.currentMovement=new r["default"](n,0,p(a,m).call(a),a.options),a.currentMovement.updateData(l({},t)),a.currentMovement.fetchData(),a.data.push(a.currentMovement.data),a.setTagForCurrentMovement(a.currentMovement.data),a.config.onAnnoAdded(a.currentMovement.data,n)}})),u(this,"dispatchEventToAnno",(function(e){var t=e.type;if(t!==o.MOUSE_EVENT[6]){var n=e.clientX,r=e.clientY;if(e.targetTouches&&e.targetTouches.length>0){var i=e.targetTouches[0];n=i?i.clientX:void 0,r=i?i.clientY:void 0}if(b(a,E,n),b(a,x,r),t===o.MOUSE_EVENT[0]||t===o.TOUCH_EVENT[0])a.actionDown=!0,b(a,O,p(a,E)),b(a,w,p(a,x)),"function"===typeof p(a,y)&&p(a,y).call(a,!0),p(a,C).call(a,e);else if(t===o.MOUSE_EVENT[1]||t===o.MOUSE_EVENT[3]||t===o.MOUSE_EVENT[5]||t===o.TOUCH_EVENT[1]||t===o.TOUCH_EVENT[3]||t===o.TOUCH_EVENT[5]){if(null==a.currentMovement)return!0;if(a.actionDown){if(a.filterOutOfBounds(p(a,E),p(a,x)))return;a.currentMovement.transform(p(a,E)-p(a,O),p(a,x)-p(a,w)),b(a,O,p(a,E)),b(a,w,p(a,x))}}else"function"===typeof p(a,y)&&p(a,y).call(a,!1),a.actionDown&&(a.updateMovementData(),a.selectAnnotation()),a.actionDown=!1}else a.selectAnnotation()})),u(this,"removeSelectedAnnotation",(function(){if(a.currentMovement){var e=a.currentMovement.currentNode.classList;e.remove("selected"),a.options.blurOtherDots&&a.currentMovement.currentNode.querySelectorAll("[class*=".concat(o.PREFIX_RESIZE_DOT,"]")).forEach((function(e){e.classList.add("hidden")}))}})),u(this,"selectAnnotation",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(a.currentMovement){var t=a.currentMovement.currentNode.classList;if(t.add("selected"),a.options.blurOtherDots){if(!a.options.editable)return void a.currentMovement.currentNode.querySelectorAll("[class*=".concat(o.PREFIX_RESIZE_DOT,"]")).forEach((function(e){e.classList.contains(o.dotCls[8])?e.classList.remove("hidden"):e.classList.add("hidden")}));a.currentMovement.currentNode.querySelectorAll("[class*=".concat(o.PREFIX_RESIZE_DOT,"]")).forEach((function(e){e.classList.remove("hidden")}))}if(!e)return;var n=a.currentMovement.currentNode,r=l({},a.currentMovement.data);a.config.onAnnoSelected(r,n)}})),u(this,"selectMarkerByTagId",(function(e){var t=a.annotationContainer.querySelector('[data-id="'.concat(e,'"]'));if(t){var n=t.parentNode.parentNode.parentNode;a.removeSelectedAnnotation(),null==a.currentMovement&&(a.currentMovement=new r["default"](n,-1,p(a,m).call(a),a.options));var o=a.data.find((function(e){return e.uuid==n.dataset.uuid}));a.currentMovement.data=o,a.currentMovement.currentNode=n,a.currentMovement.boundRect=p(a,m).call(a),a.currentMovement.type=-1,a.selectAnnotation(!1)}})),d(this,C,{writable:!0,value:function(e){a.removeSelectedAnnotation();var t=e.target,n=t.classList.contains("annotation")?t:t.parentNode;null==a.currentMovement&&(a.currentMovement=new r["default"](n,0,p(a,m).call(a),a.options));var i=a.data.find((function(e){return e.uuid==n.dataset.uuid}));a.currentMovement.data=i,a.currentMovement.currentNode=n,b(a,j,!1),a.currentMovement.boundRect=p(a,m).call(a),t.classList.contains(o.dotCls[0])?a.currentMovement.type=0:t.classList.contains(o.dotCls[1])?a.currentMovement.type=1:t.classList.contains(o.dotCls[2])?a.currentMovement.type=2:t.classList.contains(o.dotCls[3])?a.currentMovement.type=3:t.classList.contains(o.dotCls[4])?a.currentMovement.type=4:t.classList.contains(o.dotCls[5])?a.currentMovement.type=5:t.classList.contains(o.dotCls[6])?a.currentMovement.type=6:t.classList.contains(o.dotCls[7])?a.currentMovement.type=7:t.classList.contains("annotation")?a.currentMovement.type=-1:b(a,j,!0)}}),u(this,"filterOutOfBounds",(function(e,t){return e>=p(a,m).call(a).x+p(a,m).call(a).width+2||t>=p(a,m).call(a).y+p(a,m).call(a).height+2||e<5||t<5})),this.options=l({},o.defaultConfig.options),this.config=l({},o.defaultConfig),b(this,y,f),this.annotationContainer=t,b(this,m,n),this.actionDown=!1,this.currentMovement=null,this.data=[];var h=this;this.delEvent=function(e){if(8===e.keyCode||46===e.keyCode){var t=h.currentMovement;t&&h.removeAnnotation(t.currentNode)}},this.setConfigOptions(c)};t["default"]=S},f321:function(e,t,n){"use strict";n("d3b7"),Array.prototype.forEach=Array.prototype.forEach||function(e){var t="[object Array]"==Object.prototype.toString.call(this);if(!t)throw TypeError;for(var n in this)"forEach"!=n&&e.call(this[n],n,this[n],this)}},f5ed:function(e,t,n){"use strict";n("ac1f"),n("1276"),n("a15b"),n("b680"),n("2ca0"),Object.defineProperty(t,"__esModule",{value:!0}),t.transformDataArray=t.positionP2S=t.percentToSize=t.UUID=t.dotCls=t.PREFIX_RESIZE_DOT=t.imageOpContent=t.imageOpTag=t.defaultConfig=t.defaultPositions=t.TOUCH_EVENT=t.MOUSE_EVENT=void 0;var o=["mousedown","mousemove","mouseend","mouseout","mouseup","mouseleave","contextmenu"];t.MOUSE_EVENT=o;var r=["touchstart","touchmove","touchend","touchcancel","touchup","touchleave"];t.TOUCH_EVENT=r;var a={bottom:1,out_bottom:2};t.defaultPositions=a;var i={options:{deviceType:"both",blurOtherDots:!1,blurOtherDotsShowTags:!1,editable:!0,showTags:!0,closable:!0,supportDelKey:!1,tagLocation:a.bottom,trashPositionStart:0,boundReachPercent:.01,textComponent:function(){},annotationClass:"annotation"},onAnnoContextMenu:function(e,t,n){},onAnnoRemoved:function(e,t){return!0},onAnnoAdded:function(e,t){},onAnnoChanged:function(e,t){},onAnnoDataFullLoaded:function(){},onAnnoSelected:function(e,t){},onUpdated:function(e,t){}};t.defaultConfig=i;var c="g-image-op-name";t.imageOpTag=c;var l="g-image-op-content";t.imageOpContent=l;var s="resize-dot";t.PREFIX_RESIZE_DOT=s;var u=["".concat(s,"-n"),"".concat(s,"-s"),"".concat(s,"-w"),"".concat(s,"-e"),"".concat(s,"-nw"),"".concat(s,"-ne"),"".concat(s,"-sw"),"".concat(s,"-se"),"".concat(s,"-tag-trash")];t.dotCls=u;var d=function(e,t){var n,o,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=[];if(t=t||r.length,e)for(n=0;n<e;n++)a[n]=r[0|Math.random()*t];else for(a[8]=a[13]=a[18]=a[23]="-",a[14]="4",n=0;n<36;n++)a[n]||(o=0|16*Math.random(),a[n]=r[19===n?3&o|8:o]);return a.join("")};t.UUID=d;var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.round(parseFloat(e).toFixed(3)*t/100)};t.percentToSize=f;var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:"0%",y:"0%",x1:"0%",y1:"0%"},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;for(var o in e)o.startsWith("x")?e[o]=f(e[o],t):e[o]=f(e[o],n);return e};t.positionP2S=p;var h=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<e.length;n++){var o=e[n];o.position=p(o.position,t)}return e};t.transformDataArray=h},f615:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="f615"}});
//# sourceMappingURL=app.6c64a82f.js.map